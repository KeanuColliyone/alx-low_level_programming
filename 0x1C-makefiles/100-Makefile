CC := gcc -Wall -Werror -Wextra -pedantic
RM := rm -f
SRC := $(wildcard *.c)
NAME := school
HEADER := m.h

.PHONY: all clean fclean oclean re check-header

all: check-header $(NAME)

$(NAME): $(SRC)
	@$(CC) -c $^
	@$(CC) -o $@ $(^:.c=.o)

check-header:
	@test -f $(HEADER) || (echo "Header file $(HEADER) missing." && false)

clean:
	@$(RM) *~ \#*\# $(NAME) $(SRC:.c=.o)

oclean:
	@$(RM) $(SRC:.c=.o)

fclean: clean

re: fclean all
